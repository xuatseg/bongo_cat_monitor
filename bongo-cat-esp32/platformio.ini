[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 460800
extra_scripts = pre:extra_script.py

; Build flags for ESP32
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLV_CONF_INCLUDE_SIMPLE
    -DARDUINO_ARCH_ESP32
    -DCONFIG_TINYUSB_CDC_ENABLED=0
    -DUSER_SETUP_LOADED=1
    -Iinclude
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=320
    -DILI9341_2_DRIVER=1
    -DESP32_DMA=1
    -DTFT_MISO=12
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=2
    -DTFT_RST=-1
    -DTFT_BL=27
    -DTOUCH_CS=33
    -DTOUCH_CS_PIN=33
    -DTFT_INVERSION_ON=1
    -DLOAD_GLCD=1
    -DLOAD_FONT2=1
    -DLOAD_FONT4=1
    -DLOAD_FONT6=1
    -DLOAD_FONT7=1
    -DLOAD_FONT8=1
    -DLOAD_GFXFF=1
    -DSMOOTH_FONT=1
    -DSPI_FREQUENCY=40000000
    -DSPI_READ_FREQUENCY=20000000

; Library dependencies
lib_deps = 
    lvgl/lvgl@^8.3.11
    bodmer/TFT_eSPI@^2.5.43
    WiFi@^1.0.0

; Local libraries
lib_extra_dirs = lib

; Board configuration
board_build.partitions = default.csv
board_build.filesystem = spiffs
board_build.flash_mode = dio
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L

; Monitor configuration
monitor_filters = 
    default
    time

; Upload configuration
upload_protocol = esptool
upload_resetmethod = hard_reset
upload_flags = 
    --before=default_reset
    --after=hard_reset
    --chip=esp32
